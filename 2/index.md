---
layout: default
title: DOM & AJAX
---

{::options auto_ids="false" /}

← [Домой](/)

# 2 DOM & AJAX
{:#2}

**ВНИМАНИЕ! РАЗДЕЛ НАХОДИТСЯ В СТАДИИ РАЗРАБОТКИ.**

Содержание:

1. [Работа с DOM, Events](#2-1)
    * [Полезные ресурсы](#2-1-links)
    * [Лекция](#2-1-lecture)
    * [Практика](#2-1-practice)
    * [Домашнее задание](#2-1-hw)
    * [Техническое задание](#2-1-spec)
2. [Сетевое взаимодествие](#2-2)
    * [Полезные ресурсы](#2-2-links)
    * [Лекция](#2-2-lecture)
    * [Практика](#2-2-practice)
    * [Домашнее задание](#2-2-hw)
    * [Техническое задание](#2-2-spec)
3. [Хранение данных на клиенте](#2-3)
    * [Полезные ресурсы](#2-3-links)
    * [Лекция](#2-3-lecture)
    * [Практика](#2-3-practice)
    * [Домашнее задание](#2-3-hw)
    * [Техническое задание](#2-3-spec)

## 2.1 Работа с DOM, Events
{:#2-1}

#### Полезные ресурсы
{:#2-1-links}

1. [DOM](https://developer.mozilla.org/en/docs/DOM).
2. [Events](http://www.w3.org/TR/DOM-Level-2-Events/events.html).
3. [Host Objects](http://es5.github.io/#x4.3.8).
4. [Событийно-ориентированное_программирование](http://ru.wikipedia.org/wiki/Событийно-ориентированное_программирование).

### Лекция
{:#2-1-lecture}

### Практика
{:#2-1-practice}

### Домашнее задание
{:#2-1-hw}

1. Реализация игровой механики (на протяжении последующих домашних заданий в этом модуле).
2. Сделать форму ввода имени игрока после окончания игры.
3. Задействовать механизм PubSub:
    1. RouletteView подписывается на showScreen и скрывает остальные экраны.
    2. Бросить gaveOver, на который показывать ввод имени игрока. А после ввода показать экран со списком лучших игроков.

### Техническое задание
{:#2-1-spec}

## 2.2 Сетевое взаимодествие
{:#2-2}

#### Полезные ресурсы
{:#2-2-links}

1. Tiffany Brown. [Introduction to XMLHttpRequest Level 2](http://dev.opera.com/articles/view/xhr2/) // 2012.
2. Armin Ronacher. [Websockets 101](http://lucumr.pocoo.org/2012/9/24/websockets-101/) // 2012.
3. [HTTP Status Codes](http://www.restapitutorial.com/httpstatuscodes.html).

### Лекция
{:#2-2-lecture}

<!--
- HTTP.
- AJAX.
- CORS.
- WebSockets.
-->

### Практика
{:#2-2-practice}

### Домашнее задание
{:#2-2-hw}

1. Наладить взаимодествие с сервером с помощью AJAX.

### Техническое задание
{:#2-2-spec}

1. Создать новый view GameOver на экране Game
    1. View должна содержать поле ввода имени игрока, кнопку сохранения и отображать переданный при инициализации счет игрока.
    2. При сабмите формы создается модель score с указанными в форме данными и добавляется в коллекцию scores
    3. Модель сохраняется на сервер.
    4. На время сохранения форма блокируется
    5. При ошибке сохранения пользователю выводится ошибка и форма разблокируется
    6. После успешного сохранения форма разблокируется, сбрасывается и происходит переход на экран Scoreboard
2. Модифицировать экран Scoreboard для получения данных с сервера (топ 10)
    1. При отображении экрана происходит fetch коллекции scores
    2. Во время загрузки пользователю отображается сообщение о загрузке
    3. В случае ошибки загрузки пользователю отображается соответствующее сообщение с возможностью обновить экран
    4. В случае успешной загрузки отображается список

### Серверное RESTful API для работы со Score
{:#2-2-restful}

1. GET /scores
    1. Код 200 - возвращает всю коллкцию scores или первые x элементов (заданные через ?limit=x) отсортированную по убыванию счета игрока
2. GET /scores/:id
    1. Код 200 - возвращает модель с переданным id
    2. Код 400 - не верные входные данные
    3. Код 404 - модель с указанным id не найдена
3. POST /scores
    1. Request Body: {"name": "<name>", "score": <score>}
    2. Код 200 - возвращает id созданной модели
    3. Код 400 - не верные входные данные
4. DEL /scores/:id
    1. Код 200 - удаляет модель с переданным id
    2. Код 400 - не верные входные данные
    3. Код 404 - модель с указанным id не найдена
5. PUT /scores/:id
    1. Request Body: {"id": <id>, "name": "<name>", "score": <score>}
    2. Код 200 - обновляет и возвращает модель с переданным id
    3. Код 400 - не верные входные данные
    4. Код 404 - модель с указанным id не найдена

## 2.3 Хранение данных на клиенте
{:#2-3}

#### Полезные ресурсы
{:#2-3-links}

### Лекция
{:#2-3-lecture}

<!--
- Cookies.
- [Storage](http://www.html5rocks.com/en/features/storage).
-->

### Практика
{:#2-3-practice}

### Домашнее задание
{:#2-3-hw}

1. Организовать хранение пользовательских настроек на клиенте.
2. Сохранять результаты игры на клиенте, при остуствии связи с сервером.

### Техническое задание
{:#2-3-spec}
