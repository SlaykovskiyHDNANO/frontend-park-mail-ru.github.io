---
layout: default
title: DOM & AJAX
---

{::options auto_ids="false" /}

[ГЛАВНАЯ](/)

# 2 DOM & AJAX
{: id="2"}

**ВНИМАНИЕ! РАЗДЕЛ НАХОДИТСЯ В СТАДИИ РАЗРАБОТКИ.**

Содержание:

2.1. [Работа с DOM, Events](#2.1)

2.1.1 [Полезные ресурсы](#2.1.1)\\
2.1.2 [Смешенное занятие](#2.1.2)\\
2.1.3 [Домашнее задание](#2.1.3)\\
2.1.4 [Техническое задание](#2.1.4)
{:.toc}

2.2 [Сетевое взаимодествие](#2.2)

2.2.1 [Полезные ресурсы](#2.2.1)\\
2.2.2 [Смешенное занятие](#2.2.2)\\
2.2.3 [Домашнее задание](#2.2.3)\\
2.2.4 [Техническое задание](#2.2.4)
{:.toc}

2.3 [Хранение данных на клиенте](#2.3)

2.3.1 [Полезные ресурсы](#2.3.1)\\
2.3.2 [Смешенное занятие](#2.3.2)\\
2.3.3 [Домашнее задание](#2.3.3)\\
2.3.4 [Техническое задание](#2.3.4)
{:.toc}

## 2.1 Работа с DOM, Events
{: id="2.1"}

### 2.1.1 Полезные ресурсы
{: id="2.1.1"}

1. [DOM](https://developer.mozilla.org/en/docs/DOM).
2. [Events](http://www.w3.org/TR/DOM-Level-2-Events/events.html).
3. [Host Objects](http://es5.github.io/#x4.3.8).
4. [Событийно-ориентированное_программирование](http://ru.wikipedia.org/wiki/Событийно-ориентированное_программирование).

### 2.1.2 Смешенное занятие
{: id="2.1.2"}

### 2.1.3 Домашнее задание
{: id="2.1.3"}

1. Реализация игровой механики (на протяжении последующих домашних заданий в этом модуле).
2. Сделать форму ввода имени игрока после окончания игры.
3. Задействовать механизм publish–subscribe:
    1. RouletteView подписывается на showScreen и скрывает остальные экраны.
    2. Бросить gaveOver, на который показывать ввод имени игрока. А после ввода показать экран со списком лучших игроков.

### 2.1.4 Техническое задание
{: id="2.1.4"}

## 2.2 Сетевое взаимодествие
{: id="2.2"}

### 2.2.1 Полезные ресурсы
{: id="2.2.1"}

1. Tiffany Brown. [Introduction to XMLHttpRequest Level 2](http://dev.opera.com/articles/view/xhr2/) // 2012.
2. Armin Ronacher. [Websockets 101](http://lucumr.pocoo.org/2012/9/24/websockets-101/) // 2012.
3. [HTTP Status Codes](http://www.restapitutorial.com/httpstatuscodes.html).

### 2.2.2 Смешенное занятие
{: id="2.2.2"}

<!--
- HTTP.
- AJAX.
- CORS.
- IFRAME, JSON.
- WebSockets.
-->

### 2.2.3 Домашнее задание
{: id="2.2.3"}

1. Наладить взаимодествие с сервером с помощью AJAX.

### 2.2.4 Техническое задание
{: id="2.2.4"}

1. Создать новый view GameOver на экране Game
    1. View должна содержать поле ввода имени игрока, кнопку сохранения и отображать переданный при инициализации счет игрока.
    2. При сабмите формы создается модель score с указанными в форме данными и добавляется в коллекцию scores
    3. Модель сохраняется на сервер.
    4. На время сохранения форма блокируется
    5. При ошибке сохранения пользователю выводится ошибка и форма разблокируется
    6. После успешного сохранения форма разблокируется, сбрасывается и происходит переход на экран Scoreboard
2. Модифицировать экран Scoreboard для получения данных с сервера (топ 10)
    1. При отображении экрана происходит fetch коллекции scores
    2. Во время загрузки пользователю отображается сообщение о загрузке
    3. В случае ошибки загрузки пользователю отображается соответствующее сообщение с возможностью обновить экран
    4. В случае успешной загрузки отображается список

### 2.2.5 RESTful API
{: id="2.2.5"}

Серверное RESTful API для работы со Score.

1. `GET /scores`
    + Код `200` — возвращает всю коллкцию scores или первые x элементов (заданные через `?limit=N`) отсортированную по убыванию счета игрока
2. `GET /scores/:id`
    + Код `200` — возвращает модель с переданным id
    + Код `400` — не верные входные данные
    + Код `404` — модель с указанным id не найдена
3. `POST /scores`
    + Тело запроса: `{"name": "<name>", "score": <score>}`
    + Код `200` — возвращает id созданной модели
    + Код `400` — не верные входные данные
4. `DEL /scores/:id`
    + Код `200` — удаляет модель с переданным id
    + Код `400` — не верные входные данные
    + Код `404` — модель с указанным id не найдена
5. `PUT /scores/:id`
    + Тело запроса: `{"id": <id>, "name": "<name>", "score": <score>}`
    + Код `200` — обновляет и возвращает модель с переданным id
    + Код `400` — не верные входные данные
    + Код `404` — модель с указанным id не найдена

## 2.3 Хранение данных на клиенте
{: id="2.3"}

### 2.3.1 Полезные ресурсы
{: id="2.3.1"}

### 2.3.2 Смешенное занятие
{: id="2.3.2"}

<!--
- Cookies.
- [Storage](http://www.html5rocks.com/en/features/storage).
- IndexDB -> localStorage
-->

### 2.3.3 Домашнее задание
{: id="2.3.3"}

1. Организовать хранение пользовательских настроек на клиенте.
2. Сохранять результаты игры на клиенте, при остуствии связи с сервером.

### 2.3.4 Техническое задание
{: id="2.3.4"}
