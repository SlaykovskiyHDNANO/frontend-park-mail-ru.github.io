<!DOCTYPE  html>
<html lang="ru">
    <head>
        <meta charset="utf-8" />
        
            <title>Отладка и мобильный веб — Фронтенд разработка</title>
        
        
            <meta name="description" content="Материалы курса «Фронтенд разработка», читаемого во втором семестре Технопарка Mail.ru."/>
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link href='../main.css' rel='stylesheet' type='text/css' />
    </head>
    <body>
        <script>

            // if (location.host === 'eprev.github.io') location.href= 'http://frontend.tech-mail.ru';
            //
            // (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            // (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            // m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            // })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            //
            // ga('create', 'UA-12144011-3', 'eprev.org');
            // ga('send', 'pageview');

        </script>
        <div id="page">
            
<p><a href="/">ГЛАВНАЯ</a></p>

<h1 id="3">4 Производительность и мобильный веб</h1>

<p><strong>ВНИМАНИЕ! РАЗДЕЛ НАХОДИТСЯ В СТАДИИ РАЗРАБОТКИ.</strong></p>

<p>Содержание:</p>

<p>4.1. <a href="#4.1">Производительность</a></p>

<p class="toc">4.1.1 <a href="#4.1.1">Полезные ресурсы</a><br />
4.1.2 <a href="#4.1.2">Смешанное занятие</a><br />
4.1.3 <a href="#4.1.3">Домашнее задание</a><br />
4.1.4 <a href="#4.1.4">Техническое задание</a></p>

<p>4.2 <a href="#4.2">Возможности смартфонов</a></p>

<p class="toc">4.2.1 <a href="#4.2.1">Полезные ресурсы</a><br />
4.2.2 <a href="#4.2.2">Смешанное занятие</a><br />
4.2.3 <a href="#4.2.3">Домашнее задание</a><br />
4.2.4 <a href="#4.2.4">Техническое задание</a></p>

<h2 id="4.1">4.1 Производительность</h2>

<h3 id="4.1.1">4.1.1 Полезные ресурсы</h3>

<ol>
  <li>Tali Garsiel, Paul Irish. <a href="http://www.html5rocks.com/ru/tutorials/internals/howbrowserswork/">Принципы работы современных веб-браузеров</a>.</li>
  <li>Yahoo Developer Network. <a href="http://developer.yahoo.com/performance/rules.html">Best Practices for Speeding Up Your Web Site</a>.</li>
  <li>Егор Дыдыкин. <a href="http://habrahabr.ru/company/mailru/blog/142193/">Новая Главная портала Mail.Ru</a>.</li>
</ol>

<h3 id="4.1.2">4.1.2 Смешанное занятие</h3>

<h3 id="4.1.3">4.1.3 Домашнее задание</h3>

<ol>
  <li>Реализовать индикатор загрузки приложения.</li>
  <li>Организовать сборку ресурсов для <code>production</code> и <code>development</code> окружений.</li>
</ol>

<h3 id="4.1.4">4.1.4 Техническое задание</h3>

<ol>
  <li>В Gruntfile необходимо реализовать задачу <code>build</code>. Эта задача должна выполнять:
    <ol>
      <li>Собирать CSS в режиме <code>compressed</code>.</li>
      <li>Собирать JavaScript с помощью  <a href="https://npmjs.org/package/grunt-contrib-requirejs"><code>grunt-contrib-requirejs</code></a>.</li>
      <li>Минифицировать сборку JavaScript файла вместе с библиотекой <a href="https://github.com/jrburke/almond"><code>almond</code></a> с помощью <a href="https://npmjs.org/package/grunt-contrib-concat"><code>grunt-contrib-concat</code></a> и <a href="https://npmjs.org/package/grunt-contrib-uglify"><code>grunt-contrib-uglify</code></a>.</li>
    </ol>
  </li>
  <li>Собранные задачей <code>build</code> файлы должны подключаться на странице игры при условии запуска сервера в <code>production</code> окружении.</li>
</ol>

<h2 id="4.2">4.2 Возможности смартфонов</h2>

<h3 id="4.2.1">4.2.1 Полезные ресурсы</h3>

<ol>
  <li>Chris Wilson, Paul Kinlan. <a href="http://www.html5rocks.com/en/mobile/touchandmouse/">Touch And Mouse. Together Again For The First Time</a> // 2013.</li>
  <li>Earle Castledine, Myles Eftos, Max Wheeler. <a href="http://www.sitepoint.com/store/build-mobile-websites-and-apps-for-smart-devices/">Build Mobile Websites and Apps for Smart Devices</a> // 2011.</li>
  <li>Mark Pilgrim. <a href="http://diveintohtml5.info/">Dive into HTML5</a>.</li>
  <li><a href="https://developer.apple.com/">Apple Developer</a></li>
  <li><a href="https://developer.mozilla.org/ru/">Mozilla Developer Network</a></li>
  <li><a href="http://www.html5rocks.com/en/">HTML5 Rocks</a></li>
  <li><a href="http://html5please.com/">HTML5 Please</a></li>
  <li><a href="http://caniuse.com/">Can I use…</a></li>
</ol>

<h3 id="4.2.2">4.2.2 Смешанное занятие</h3>

<!--
- Акселерометр.
- Гироскоп.
- Тач-события.
-->

<h3 id="4.2.3">4.2.3 Домашнее задание</h3>

<ol>
  <li>Сделать джойстик для смартфонов и организовать взаимодействие на websockets между экранами приложения.</li>
</ol>

<h3 id="4.2.4">4.2.4 Техническое задание</h3>

<h3 id="4.2.5">4.2.5 RPC API</h3>

<table>
  <tbody>
    <tr>
      <td>Создаем экземпляр Connector с указанием remote: ‘/&lt;тип клиента: console</td>
      <td>player&gt;’.</td>
    </tr>
  </tbody>
</table>

<pre><code>var server = new Connector({
    remote: '/console'
});
</code></pre>

<p>Через socket.io устанавливается соединение с сервером по пути, указанному в remote, и происходит запрос на получение набора функций, поддерживаемых сервером. Запрос асинхронный, потому Connector предоставляет метод onReady, позволяющий начать работу с сервером, когда все будет готово.</p>

<pre><code>server.onReady(function(){
    server.someServerSideFunction();
});
</code></pre>

<p>При желании можно часть или все функции объявить при инициализации и вызывать их сразу. Запросы на вызов серверной функции складываются в очередь и будут запущены после полчения списка серверных функций.</p>

<pre><code>var server = new Connector({
    server: ['getToken', 'bind'],
    remote: '/console'
});

server.getToken(function(token){});
</code></pre>

<p>На сервере реализованы следующие функции:</p>

<pre><code>server.getToken(function(token){
    token // токен для иниализации связи
});

// для первичной инициализации связки по токену
server.bind({token: '&lt;token&gt;'}, function(data){
    data.status // 'success' в случае успеха, 'undefined token' в случае ошибки, 'busy token' в случае, если токен занят
    data.guid // guid связки в случае успеха
});

// для восстановления связки, когда guid уже получен
server.bind({guid: '&lt;guid&gt;'}, function(data){
    data.status // 'success' в случае успеха, 'undefined guid' в случае ошибки
});
</code></pre>

<p>Так же Connector поддерживает следующие события</p>

<pre><code>server.on('connect', function(){}); // установка соединения
server.on('disconnect', function(){}); // потеря соединения
server.on('reconnect', function(){}); // восстановление соединения
</code></pre>

<p>Специальное событие для консоли, происходящее когда игрок подключил джойстик</p>

<pre><code>server.on('player-joined', function(data){
    data.guid // guid инициализированной связки
});
</code></pre>

<p>Для общения между консолью и джойстиком используется метод send для отправки сообщения от одного клиента и событие message на другом для получения сообщения.</p>

<pre><code>server.send(data, function(answer){
    answer // ответ другой стороны
});

server.on('message', function(data, answer){
    data // данные сообщения
    answer('&lt;answer&gt;') // отправка ответа обратно
});
</code></pre>


            <div id="footer">✢ ✢ ✢</div>
        </div>
        <script src="../highlight.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
