<!DOCTYPE  html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=792, user-scalable=no">
        <title>Markdown</title>
        <style>
            body {
                margin: 0;
                padding: 26px;
                font-family: Segoe, "Segoe UI", Candara, Calibri, Arial, sans-serif;
                font-size: 18px;
                line-height: 26px
            }
            section {
                max-width: 768px;
                margin: auto;
            }
            h1, h2, h3, h4, h5, h6 {
                margin: 0 0 26px;
                text-rendering: optimizeLegibility;
                page-break-inside: avoid;
                font-weight: 400
            }

            h1 {
                font-size: 36px;
                line-height: 52px;
                text-transform: uppercase
            }

            h2 {
                font-size: 32px
            }

            h2, h3 {
                line-height: 52px
            }

            h3 {
                font-size: 27px
            }

            h4 {
                font-size: 24px;
                line-height: 26px
            }

            h5 {
                font-size: 21px
            }

            h5, h6 {
                line-height: 26px
            }

            h6 {
                font-size: 18px
            }

            ul, ol, pre, blockquote {
                margin: 26px 0
            }

            blockquote {
                font-style: italic;
                border-left: 4px solid #d6d6d6;
                padding-left: 1em
            }

            ul {
                list-style-position: outside
            }

            p {
                margin: 26px 0;
                -webkit-hyphens: auto;
                -moz-hyphens: auto;
                -ms-hyphens: auto;
                -o-hyphens: auto;
                hyphens: auto
            }

            code {
                font-family: "Courier New", Courier, monospace;
                font-size: 18px;
                line-height: 1
            }

            abbr {
                letter-spacing: .1em
            }

            a {
                text-decoration: none;
                border-bottom: 1px solid #555
            }

            img {
                max-width: 100%;
            }

            /**
             *  github.com style (c) Vasily Polovnyov <vast@whiteants.net>
             */
            pre code {
                display: block; padding: 26px;
                color: #333;
                background: #f8f8ff;
                overflow: auto;
            }
            pre .comment,
            pre .template_comment,
            pre .diff .header,
            pre .javadoc {
                color: #998;
                font-style: italic
            }
            pre .keyword,
            pre .css .rule .keyword,
            pre .winutils,
            pre .javascript .title,
            pre .nginx .title,
            pre .subst,
            pre .request,
            pre .status {
                color: #333;
                font-weight: bold
            }
            pre .number,
            pre .hexcolor,
            pre .ruby .constant {
                color: #099;
            }
            pre .string,
            pre .tag .value,
            pre .phpdoc,
            pre .tex .formula {
                color: #d14
            }
            pre .title,
            pre .id {
                color: #900;
                font-weight: bold
            }
            pre .javascript .title,
            pre .lisp .title,
            pre .clojure .title,
            pre .subst {
                font-weight: normal
            }
            pre .class .title,
            pre .haskell .type,
            pre .vhdl .literal,
            pre .tex .command {
                color: #458;
                font-weight: bold
            }
            pre .tag,
            pre .tag .title,
            pre .rules .property,
            pre .django .tag .keyword {
                color: #000080;
                font-weight: normal
            }
            pre .attribute,
            pre .variable,
            pre .lisp .body {
                color: #008080
            }
            pre .regexp {
                color: #009926
            }
            pre .class {
                color: #458;
                font-weight: bold
            }
            pre .symbol,
            pre .ruby .symbol .string,
            pre .lisp .keyword,
            pre .tex .special,
            pre .prompt {
                color: #990073
            }
            pre .built_in,
            pre .lisp .title,
            pre .clojure .built_in {
                color: #0086b3
            }
            pre .preprocessor,
            pre .pi,
            pre .doctype,
            pre .shebang,
            pre .cdata {
                color: #999;
                font-weight: bold
            }
            pre .deletion {
                background: #fdd
            }
            pre .addition {
                background: #dfd
            }
            pre .diff .change {
                background: #0086b3
            }
            pre .chunk {
                color: #aaa
            }
        </style>
    </head>
    <body>
        <section>
            <h1 id="-">Преамбула</h1>
<p>Предполагается, что студент имеет базовые знания веб-технологий (HTML, CSS, JavaScript) и практические навыки решения задач с помощью базовых алгоритмов и структур данных.</p>
<p>Проектная работа выполняется в группах по 2–3 человека (роли каждого должны быть представлены при формировании группы). Первое практическое занятие – индивидуальное.</p>
<p>Для выполнения проектной работы на занятиях потребуется ноутбук/виртуальная машина с установленной ОС Linux/OS X.</p>
<p>Ресурсы для самостоятельного изучения:</p>
<ol>
<li>Влад Мержевич. <a href="http://htmlbook.ru/samhtml">Самоучитель HTML4</a> // 2010.</li>
<li>Влад Мержевич. <a href="http://htmlbook.ru/samcss">Самоучитель CSS</a> // 2010.</li>
<li>Илья Кантор. <a href="http://learn.javascript.ru">Современный учебник JavaScript</a> // 2013.</li>
<li>Антон Шевчук. <a href="http://anton.shevchuk.name/jquery-book/">jQuery для начинающих</a> // 2013.</li>
<li><a href="https://developer.mozilla.org/">Mozilla Developer Network</a>.</li>
<li><a href="http://www.html5rocks.com/">HTML5 Rocks</a>.</li>
<li>Mark Piligrim. <a href="http://diveintohtml5.info">Dive into HTML5</a> // 2013.</li>
</ol>
<h1 id="1-">1 Архитектура</h1>
<h2 id="1-1-">1.1 Знакомство, инструменты, настройка окружения</h2>
<h4 id="-">Полезные ресурсы</h4>
<ol>
<li>Scott Chacon. <a href="http://git-scm.com/book">Pro Git</a> // 2009.</li>
<li><a href="http://gruntjs.com/getting-started">Grunt: Getting started</a> // 2013.</li>
<li>Документация по <a href="https://npmjs.org/doc/cli/npm.html">NPM</a> и <a href="https://npmjs.org/doc/files/package.json.html"><code>package.json</code></a>.</li>
<li>Документация по шаблонизатору <a href="https://github.com/mailru/fest">Fest</a>.</li>
<li>Антон Шевчук. <a href="http://anton.shevchuk.name/jquery-book/">jQuery для начинающих</a> // 2013.</li>
</ol>
<h3 id="-">Лекция</h3>
<p>Меня зовут Антон Епрев, в компании Mail.ru я руковожу группой фронтенд разработчиков проекта «Почта». Вести курс мне будут помогать мои коллеги: Егор Дыдыкин и Иван Чашкин. Егор руководит разработкой главной страницы Mail.ru и портальной навигацией, умеет делать такие веб-страницы, которые браузер быстро загружает и отрисовывает. Иван занимается разработкой веб-версии почты для смартфонов, знает если не абсолютно все, то безусловно очень много про особенности мобильных браузеров.</p>
<p>Курс фронтенд разработки состоит из трех модулей, восьми совмещенных занятий (на которых лекционная часть и практическая будут идти вместе), трех контрольных рубежей и презентации проекта. В общей сложности курс состоит из двенадцати занятий.</p>
<p>Обращаю ваше внимание, что на совмещенных занятиях будет вестись видеосъемка.</p>
<p>Сегодняшнее совмещенное занятие будет посвящено знакомству с курсом, инструментам и настройке рабочего окружения.</p>
<p>Дадим определение основных понятий.</p>
<p>Веб-приложение — клиент-серверное приложение, в котором клиентом выступает браузер, а сервером — веб-сервер. Логика веб-приложения распределена между сервером и клиентом, хранение данных осуществляется, преимущественно, на сервере, обмен информацией происходит по сети. Одним из преимуществ такого подхода является тот факт, что клиенты не зависят от конкретной операционной системы пользователя, поэтому веб-приложения являются межплатформенными сервисами [<a href="http://ru.wikipedia.org/wiki/Веб-приложение">Википедия</a>].</p>
<p>Этот курс посвещен разработке той части веб-приложения, которая работает на стороне клиента – в браузере. От сюда и название – клиент-сайд. Другое название – front-end, тогда как часть веб-приложения, работающая на стороне сервера, называется back-end.</p>
<p>В результате изучения курса вы освоите современную разработку клиент-сайда веб-приложений; узнаете тонкости технологий HTTP, HTML 5, CSS 3, JavaScript, DOM, Events, Host Objects, AJAX; получите необходимую базу знаний о работе браузера (десктоп, смартфоны, планшеты), клиент-серверной архитектуре, архитектуре веб-приложений (события, модули, организации кода) и приобретёте  навыки работы с DOM, асинхронного и событийно-ориентированного программирования, сетевого взаимодествия (AJAX, WebSockets), организации многопоточности в браузере, использования CSS препроцессоров, отладки веб-приложений и сборки проекта с помощью Grunt для раскладки на сервер.</p>
<p>Для успешной сдачи курса необходимо самостоятельно реализовать клиен-сайд для однопользовательской игры с использованием смартфона в качестве игрового контроллера.</p>
<p>На протяжении всего семестра у вас будет три контрольных рубежа. Каждый рубежный контроль вместе с выполнением части проектной работы сопроваждается устным контроллем знаний. Прохождение первого контрольного рубежа дает возможность пройти второй рубеж, второго – третий. Программа предполагает своевременную сдачу каждого контрольного рубежа. Итоговый рейтинг по дисциплине представляет собой сумму баллов, полученных за прохождение рубежных контролей и домашних заданий. Для успешной аттестации по данному курсу студентам необходимо набрать пороговый рейтинг — 60 баллов. При пересчете баллов студенты могут получить итоговую оценку: 0–59 неудовлетворительно, 60–74 удовлетворительно, 75–89 хорошо, 90–100 отлично.</p>
<p>Каковы критерии оценки при прохождении рубежного контроля?</p>
<ol>
<li>Соответствие результата предъявляемым требованиям.</li>
<li>Оптимальность предлагаемого решения.</li>
<li>Практичность решения (возможность дальнейшего применения в работе).</li>
<li>Качество оформления результатов работы.</li>
<li>Доказательность аргументации при защите работы.</li>
</ol>
<p>Проектная работа ведется в группах по 2–3 человека (роли каждого должны быть представлены при формировании группы).</p>
<p>Вводная часть занятия окончена. Переходим в основной части.</p>
<p>Долгое время JavaScript был прерогативой клиент-сайда. Но с выходом <a href="http://nodejs.org">Node.js</a> появилась возможность использовать JavaScript для написания высокопроизводительных приложений, исполняющихся на стороне сервера. С помощью языка программирования, которым владеет каждый фронтед разработчик, теперь стало возможным создавать различные инструметы, такие как системы сборки проекта, его тестирования и развертывания. Сегодня JavaScript является <a href="http://adambard.com/blog/top-github-languages-for-2013-so-far/">самым популярным языком программирования</a> среди создаваемых на GitHub проектов.</p>
<p>Вместе с дистрибутивом Node.js распространяется и <a href="https://npmjs.org">NPM</a> (Node Packaged Modules) — это менеджер пакетов для Node.js. У Java есть Maven, CPAN у Perl, а у Python есть pip, так и у разработчиков на Node.js есть NPM.</p>
<p>В качестве системы контроля верский кода мы будем использовать Git. Эту и следующие презентации вы сможете найти на <a href="https://github.com/eprev/frontend">GitHub</a>.</p>
<p>У каждого из вас уже имеется опыт разработки клиент-сайда, возможно, у кого-то этот опыт не ограничивается проектом, выполненным в прошлом семестре в рамках курса веб-технологий. И скорее всего, проект этот несложный. Такие проекты, обычно, состоят из одного-двух JavaScript файлов и CSS файла со стилями, которые браузер загружает по отдельности вместе с HTML кодом страницы. Такой подход перестает работать, когда проект начинает насчитывать тысячи строк кода JavaScript и стилей CSS. Работать с такими большими файлами неудобно, поэтому, как и в ситуации с программами, написанными на других языках программирования, прибегают к разбиению кода на модули, каждый из которых хранится в отдельном файле. Теперь для функционирования веб-приложения в браузере было бы необходимо загрузить десятки, а то и сотни, файлов JavaScript и CSS. Как вы должно быть уже знаете — это крайне неэффективно. Поэтому перед развертыванием проекта на сервере необходимо произвести его сборку: объединить множество JavaScript файлов в одну или несколько сборок, так же поступить и с CSS файлами, после чего эти сборки минифицировать. Минификация — это процесс сжатия исходного когда с сохранением его функциональности. Как правило, уменьшение размеры файлов достигается за счет удаления ненужных символов (таких как пробелы, переводы строк и комментарии) и замены имен переменных и функций на короткие варианты. На сегодняшний день самым популярным инструментом для сборки проектов является <a href="http://gruntjs.com/">Grunt</a>. Его без труда может установить каждый, воспользовавшись NPM.</p>
<p>Мы продолжаем двигаться от простых веб-приложений к сложным. Следующим этапом в веб-разработке становится Single Page Application — это веб-приложение, которое живет в браузере продолжительное время без березагрузки страницы. В таком приложении все дополнительные ресурсы загружаются по мере необходимости, а для отрисовки интерфейса используется клиентская шаблонизация. Существует огромное множество JavaScript шаблонизаторов, мы в компании разработали свой. <a href="https://github.com/mailru/fest">Fest</a> обеспечивает высокую производительность и возможность использования шаблонов на стороне сервера. Например, главная страница Mail.ru формируется на стороне сервера с помощью скомпилированного в JavaScript код фестового шаблона.</p>
<h3 id="-">Практика</h3>
<p>Создайте директорию для проекта.</p>
<pre><code class="lang-bash">$ mkdir ИМЯ-ПРОЕКТА</code></pre>
<p>Создайте <a href="https://npmjs.org/doc/files/package.json.html"><code>package.json</code></a>.</p>
<pre><code class="lang-bash">$ npm init</code></pre>
<p>Установите Grunt и <code>grunt-contrib-connect</code>.</p>
<pre><code class="lang-bash">$ npm install grunt-cli -g
$ npm install grunt grunt-contrib-connect --save-dev</code></pre>
<p>Создайте <code>Gruntfile.js</code> и настройте таск <code>connect</code>.</p>
<pre><code class="lang-javascript">module.exports = <span class="function"><span class="keyword">function</span> <span class="params">(grunt)</span> {</span>

    grunt.initConfig({
        connect: {
            server: {
                options: {
                    keepalive: <span class="literal">true</span>, <span class="comment">/* работать постоянно */</span>
                    port: <span class="number">8000</span>, <span class="comment">/* номер порта */</span>
                    base: <span class="string">'public'</span> <span class="comment">/* публичная директория */</span>
                }
            }
        }
    });

    grunt.loadNpmTasks(<span class="string">'grunt-contrib-connect'</span>);

};</code></pre>
<pre><code class="lang-bash">$ grunt connect
Running <span class="string">"connect:server"</span> (connect) task
Waiting forever...
Started connect web server on http://localhost:8000</code></pre>
<p>Создайте <code>public/index.html</code>.</p>
<p>Установите <code>grunt-fest</code> и настройте таск <code>fest</code>.</p>
<pre><code class="lang-bash">$ npm install grunt-fest --save-dev</code></pre>
<pre><code class="lang-javascript">module.exports = <span class="function"><span class="keyword">function</span> <span class="params">(grunt)</span> {</span>

    grunt.initConfig({
        connect: {
            server: {
                options: {
                    keepalive: <span class="literal">true</span>,
                    port: <span class="number">8000</span>,
                    base: <span class="string">'public'</span>
                }
            }
        },
        fest: {
            templates: {
                files: [{
                    expand: <span class="literal">true</span>,
                    cwd: <span class="string">'templates'</span>, <span class="comment">/* исходная директория */</span>
                    src: <span class="string">'*.xml'</span>, <span class="comment">/* имена шаблонов */</span>
                    dest: <span class="string">'public/js/tmpl'</span> <span class="comment">/* результирующая директория */</span>
                }],
                options: {
                    template: <span class="function"><span class="keyword">function</span> <span class="params">(data)</span> {</span> <span class="comment">/* задаем формат функции-шаблона */</span>
                        <span class="keyword">return</span> grunt.template.process(
                            <span class="string">'var &lt;%= name %&gt;Tmpl = &lt;%= contents %&gt; ;'</span>, <span class="comment">/* присваиваем функцию-шаблон переменной */</span>
                            {data: data}
                        );
                    }
                }
            }
        }
    });

    grunt.loadNpmTasks(<span class="string">'grunt-contrib-connect'</span>);
    grunt.loadNpmTasks(<span class="string">'grunt-fest'</span>);

};</code></pre>
<p>Установите <code>grunt-contrib-watch</code> и настройте таск <code>watch</code>.</p>
<pre><code class="lang-javascript">module.exports = <span class="function"><span class="keyword">function</span> <span class="params">(grunt)</span> {</span>

    grunt.initConfig({
        watch: {
            fest: {
                files: [<span class="string">'templates/*.xml'</span>], <span class="comment">/* следим за шаблонами */</span>
                tasks: [<span class="string">'fest'</span>], <span class="comment">/* перекомпилировать */</span>
                options: {
                    atBegin: <span class="literal">true</span> <span class="comment">/* запустить задачу при старте */</span>
                }
            }
        },
        connect: {
            server: {
                options: {
                    port: <span class="number">8000</span>,
                    base: <span class="string">'public'</span>
                }
            }
        },
        fest: {
            templates: {
                files: [{
                    expand: <span class="literal">true</span>,
                    cwd: <span class="string">'templates'</span>,
                    src: <span class="string">'*.xml'</span>,
                    dest: <span class="string">'public/js/tmpl'</span>
                }],
                options: {
                    template: <span class="function"><span class="keyword">function</span> <span class="params">(data)</span> {</span>
                        <span class="keyword">return</span> grunt.template.process(
                            <span class="string">'var &lt;%= name %&gt;Tmpl = &lt;%= contents %&gt; ;'</span>,
                            {data: data}
                        );
                    }
                }
            }
        }
    });

    grunt.loadNpmTasks(<span class="string">'grunt-contrib-watch'</span>);
    grunt.loadNpmTasks(<span class="string">'grunt-contrib-connect'</span>);
    grunt.loadNpmTasks(<span class="string">'grunt-fest'</span>);

    grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'connect'</span>, <span class="string">'watch'</span>]); <span class="comment">/* задача по умолчанию */</span>

};</code></pre>
<p>Добавьте <a href="https://github.com/gruntjs/grunt-contrib-watch#optionslivereload"><code>livereload</code></a>.</p>
<pre><code class="lang-javascript">module.exports = <span class="function"><span class="keyword">function</span> <span class="params">(grunt)</span> {</span>

    grunt.initConfig({
        watch: {
            fest: {
                files: [<span class="string">'templates/*.xml'</span>],
                tasks: [<span class="string">'fest'</span>],
                options: {
                    atBegin: <span class="literal">true</span>
                }
            },
            server: {
                files: [
                    <span class="string">'public/js/**/*.js'</span>, <span class="comment">/* следим за статикой */</span>
                    <span class="string">'public/css/**/*.css'</span>
                ],
                options: {
                    interrupt: <span class="literal">true</span>,
                    livereload: <span class="literal">true</span> <span class="comment">/* перезагрузить страницу */</span>
                }
            }
        },
        connect: {
            server: {
                options: {
                    livereload: <span class="literal">true</span>, <span class="comment">/* поддержка перезагрузки страницы */</span>
                    port: <span class="number">8000</span>,
                    base: <span class="string">'public'</span>
                }
            }
        },
        fest: {
            templates: {
                files: [{
                    expand: <span class="literal">true</span>,
                    cwd: <span class="string">'templates'</span>,
                    src: <span class="string">'*.xml'</span>,
                    dest: <span class="string">'public/js/tmpl'</span>
                }],
                options: {
                    template: <span class="function"><span class="keyword">function</span> <span class="params">(data)</span> {</span>
                        <span class="keyword">return</span> grunt.template.process(
                            <span class="string">'var &lt;%= name %&gt;Tmpl = &lt;%= contents %&gt; ;'</span>,
                            {data: data}
                        );
                    }
                }
            }
        }
    });

    grunt.loadNpmTasks(<span class="string">'grunt-contrib-watch'</span>);
    grunt.loadNpmTasks(<span class="string">'grunt-contrib-connect'</span>);
    grunt.loadNpmTasks(<span class="string">'grunt-fest'</span>);

    grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'connect'</span>, <span class="string">'watch'</span>]);

};</code></pre>
<p>Подключите <a href="http://jquery.com">jQuery</a>. Создайте функции для отрисовки каждого из экранов игры.</p>
<pre><code class="lang-javascript"><span class="keyword">var</span> $page = $(<span class="string">'.page'</span>);

<span class="comment">/* Конструктор экрана "Лучшие игроки" */</span>
<span class="function"><span class="keyword">function</span> <span class="title">showScoreboardScreen</span><span class="params">()</span> {</span>
    hideMainScreen();
}

<span class="comment">/* Деструктор экрана "Лучшие игроки" */</span>
<span class="function"><span class="keyword">function</span> <span class="title">hideScoreboardScreen</span><span class="params">()</span> {</span>}

<span class="comment">/* Конструктор экрана "Игра" */</span>
<span class="function"><span class="keyword">function</span> <span class="title">showGameScreen</span><span class="params">()</span> {</span>
    hideMainScreen();
}

<span class="comment">/* Деструктор экрана "Игра" */</span>
<span class="function"><span class="keyword">function</span> <span class="title">hideGameScreen</span><span class="params">()</span> {</span>}

<span class="comment">/* Конструктор экрана "Главный" */</span>
<span class="function"><span class="keyword">function</span> <span class="title">showMainScreen</span><span class="params">()</span> {</span>
    $page.html(mainTmpl()); <span class="comment">// Рендерим шаблон</span>
    <span class="comment">// Инициализируем обработчики событий</span>
    $page.find(<span class="string">'.js-scoreboard'</span>).on(<span class="string">'click'</span>, showScoreboardScreen);
    $page.find(<span class="string">'.js-start-game'</span>).on(<span class="string">'click'</span>, showGameScreen);
}

<span class="comment">/* Деструктор экрана "Главный" */</span>
<span class="function"><span class="keyword">function</span> <span class="title">hideMainScreen</span><span class="params">()</span> {</span>
    <span class="comment">// Удаляем установленные обработчики событий</span>
    $page.find(<span class="string">'.js-scoreboard'</span>).off(<span class="string">'click'</span>, showScoreboardScreen);
    $page.find(<span class="string">'.js-start-game'</span>).off(<span class="string">'click'</span>, showGameScreen);
}

showMainScreen();</code></pre>
<p>Заключительный вариант.</p>
<pre><code class="lang-javascript"><span class="keyword">var</span> $page = $(<span class="string">'.page'</span>),
    currentScreen = <span class="string">'main'</span>;

<span class="comment">/* Конструктор экрана "Лучшие игроки" */</span>
<span class="function"><span class="keyword">function</span> <span class="title">showScoreboardScreen</span><span class="params">()</span> {</span>
    hideMainScreen(); <span class="comment">// Убиваем экран "Главный"</span>
    currentScreen = <span class="string">'scoreboard'</span>;
    $page.html(scoreboardTmpl()); <span class="comment">// Рендерим шаблон</span>
    <span class="comment">// Инициализируем обработчики событий</span>
    $page.find(<span class="string">'.js-back'</span>).on(<span class="string">'click'</span>, showMainScreen);
}

<span class="comment">/* Деструктор экрана "Лучшие игроки" */</span>
<span class="function"><span class="keyword">function</span> <span class="title">hideScoreboardScreen</span><span class="params">()</span> {</span>
    <span class="comment">// Удаляем установленные обработчики событий</span>
    $page.find(<span class="string">'.js-back'</span>).off(<span class="string">'click'</span>, showMainScreen);
}

<span class="comment">/* Конструктор экрана "Игра" */</span>
<span class="function"><span class="keyword">function</span> <span class="title">showGameScreen</span><span class="params">()</span> {</span>
    hideMainScreen(); <span class="comment">// Убиваем экран "Главный"</span>
    currentScreen = <span class="string">'game'</span>;
    $page.html(gameTmpl()); <span class="comment">// Рендерим шаблон</span>
    <span class="comment">// Инициализируем обработчики событий</span>
    $page.find(<span class="string">'.js-back'</span>).on(<span class="string">'click'</span>, showMainScreen);
}

<span class="comment">/* Деструктор экрана "Игра" */</span>
<span class="function"><span class="keyword">function</span> <span class="title">hideGameScreen</span><span class="params">()</span> {</span>
    <span class="comment">// Удаляем установленные обработчики событий</span>
    $page.find(<span class="string">'.js-back'</span>).off(<span class="string">'click'</span>, showMainScreen);
}

<span class="comment">/* Конструктор экрана "Главный" */</span>
<span class="function"><span class="keyword">function</span> <span class="title">showMainScreen</span><span class="params">()</span> {</span>
     <span class="comment">// Убиваем текущий экран</span>
    <span class="keyword">if</span> (currentScreen === <span class="string">'scoreboard'</span>) {
        hideScoreboardScreen();
    } <span class="keyword">else</span> <span class="keyword">if</span> (currentScreen === <span class="string">'game'</span>) {
        hideGameScreen();
    }
    currentScreen = <span class="string">'main'</span>;
    $page.html(mainTmpl()); <span class="comment">// Рендерим шаблон</span>
    <span class="comment">// Инициализируем обработчики событий</span>
    $page.find(<span class="string">'.js-scoreboard'</span>).on(<span class="string">'click'</span>, showScoreboardScreen);
    $page.find(<span class="string">'.js-start-game'</span>).on(<span class="string">'click'</span>, showGameScreen);
}

<span class="comment">/* Деструктор экрана "Главный" */</span>
<span class="function"><span class="keyword">function</span> <span class="title">hideMainScreen</span><span class="params">()</span> {</span>
    <span class="comment">// Удаляем установленные обработчики событий</span>
    $page.find(<span class="string">'.js-scoreboard'</span>).off(<span class="string">'click'</span>, showScoreboardScreen);
    $page.find(<span class="string">'.js-start-game'</span>).off(<span class="string">'click'</span>, showGameScreen);
}

showMainScreen();</code></pre>
<h3 id="-">Домашнее задание</h3>
<ol>
<li>Сформировать идею игры.</li>
<li>Определиться с группой и ролями в ней.</li>
<li>Создать прототип веб-приложения.</li>
</ol>
<h3 id="-">Техническое задание</h3>
<ol>
<li>Прототип состоит из трех экранов:<ol>
<li>Главный экран (Main Screen). Содержит название игры и пункты главного меню:<ul>
<li>Пункт «Лучшие игроки» ведет на экран «Лучшие игроки».</li>
<li>Пункт «Начать игру» ведет на основной экран игры.</li>
</ul>
</li>
<li>Лучшие игроки (Scoreboard Screen). Содержит название игры и кнопку «Назад», ведущую на главный экран.</li>
<li>Основной экран игры (Game Screen). Содержит кнопку «Назад», ведущую на главный экран.</li>
</ol>
</li>
<li>За отрисовку и последующую инициализацию каждого экрана должна отвечать отдельная функция в JavaScript.</li>
<li>При первой загрузке страницы с игрой появляется главный экран. Переход между экранами должен осуществлятся без перезагрузки страницы.</li>
<li>Для шаблонизации на строне клиента должен использоваться Fest (см. <a href="https://npmjs.org/package/grunt-fest"><code>grunt-fest</code></a> и <a href="https://github.com/mailru/fest">Fest</a>).</li>
<li>На странице с игрой допускается загрузка одного JavaScript файла и одного CSS файла. Сборку этих файлов необходимо осуществить с помощью Grunt (см. <a href="http://npmjs.org/package/grunt-contrib-connect"><code>grunt-contrib-concat</code></a>).</li>
<li>С помощиью Grunt возможно запустить веб-сервер с игрой (см. <a href="https://npmjs.org/package/grunt-contrib-connect"><code>grunt-contrib-connect</code></a>). Страницу с игрой необходимо автоматически перезагружать при изменении исходных JavaScript, XML (Fest) или CSS файлов (см. параметр <code>livereload</code> в задачах <code>grunt-contrib-connect</code> и <a href="https://npmjs.org/package/grunt-contrib-watch"><code>grunt-contrib-watch</code></a>).</li>
</ol>
<p><img src="/pics/prototype-scheme.png" alt="Схема прототипа"></p>
<h2 id="1-2-">1.2 Архитектура веб-приложений</h2>
<ul>
<li>Глобальная область видимости.</li>
<li>Модули.</li>
<li>БЭМ.</li>
<li><a href="http://en.wikipedia.org/wiki/Publish–subscribe_pattern">PubSub</a>.</li>
<li><a href="http://ru.wikipedia.org/wiki/Model-View-Controller">MVC</a>.</li>
<li><a href="http://backbonejs.org">Backbone</a>.</li>
</ul>
<p>Глобальные переменные в JavaScript доступны везде, локальные — только в области видимости, в которой они определены. Глобальные переменные являются свойствамии объекта <code>window</code>. Поэтому, объявляя глобальные переменные, вы рискуете изменить свойства <code>window</code>. Каждый раз при присвоении значения неопределенной локальной переменной, вы создаете или изменяете глобальную. Использование глобальных переменных является плохой практикой. В текущей спецификации JavaScript отсутствуют модули, которые бы разграничивали области видимости переменных, объявленых внутри. Но существуют несколько приемов, позволяющих реализовать модульность.</p>
<pre><code class="lang-JavaScript"><span class="keyword">var</span> foo = <span class="number">1</span>;
(<span class="function"><span class="keyword">function</span> <span class="params">(window, undefined)</span> {</span>
    <span class="keyword">var</span> foo = <span class="number">2</span>;
    alert(foo); <span class="comment">// 2</span>
})(window);
alert(foo); <span class="comment">// 1</span></code></pre>
<p>Конструкция в примере выше называется <em>немедленно-вызываемая функция</em> (Immediately-Invoked Function Expression, IIFE). Мы создаем анонимную функцию и незамедлительно вызываем ее, с параметрами или без.</p>
<p>Пока что наша функция ничего не возвращает, и модулем назвать ее сложно. Рассмотрим пример по сложнее.</p>
<pre><code class="lang-JavaScript"><span class="keyword">var</span> foo = <span class="number">1</span>;
<span class="keyword">var</span> module = (<span class="function"><span class="keyword">function</span> <span class="params">(window, undefined)</span> {</span>
        <span class="keyword">var</span> foo = <span class="number">2</span>; <span class="comment">// приватная переменная</span>
        <span class="keyword">return</span> {
            say: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span> <span class="comment">// публичный метод</span>
                alert(foo); <span class="comment">// 2</span>
            }
        };
    })(window);
alert(foo); <span class="comment">// 1</span></code></pre>
<p>На этот раз немедленно-вызываемая функция возвращает объект, определяющий интерфейс модуля, с которым уже можно работать в других частях веб-приложения. Такой подход предотвращает попадание приватных переменных и функций в глобальный контекст, где они могут конфликтовать с другими интерфейсами.</p>
<p>В отличии от некоторых других языков программирования, JavaScript не поддерживает модификаторы доступа. Область видимости ограничивает доступность объявленных в ней переменных. Таким образом, объявленные внутри модуля переменные и функции доступны только изнутри этого модуля, а свойства объекта, возвращаемого модулем, будут доступны всем.</p>
<p>Как устроено сложное веб-приложение?</p>
<p>Уровень библиотек. 
Уровень ядра приложения.
Уровень модулей.</p>
<blockquote>
<p>Модуль — функционально законченный фрагмент программы, оформленный в виде отдельного файла с исходным кодом… предназначенный для использования в других программах [<a href="http://ru.wikipedia.org/wiki/Модуль_(программирование\">Википедия</a>)].</p>
</blockquote>
<p>Модуль веб-приложения состоит из HTML, CSS и JavaScript – блок в терминологии БЭМ. Модули характеризуются <a href="http://ru.wikipedia.org/wiki/Связанность_(программирование\">связанностью</a>). Слабая связанность позволяет вносить изменения в один модуль не оказывая при этом влияния на остальные. </p>
<p>Веб-приложение представляем собой результат работы модулей из которых оно состоит.</p>
<p>Когда модули слабо связаны между собой, то удаление одного, не приведет к некорректной работе остальные модули.</p>
<p>Ядро веб-приложения отвечает за управление модулями (загрузка, инициализация и освобождение ресурсов), предоставляет средства коммуникации между модулями и занимается обработкой ошибок в приложении.</p>
<p>На уровне библиотек находятся инструменты для работы с DOM, AJAX, парсеры и т.п.</p>
<p>Литература:</p>
<ol>
<li>Addy Osmani. <a href="http://addyosmani.com/largescalejavascript/">Patterns For Large-Scale JavaScript Application Architecture</a> // 2011.</li>
<li>Эдди Османи. <a href="http://largescalejs.ru">Паттерны для масштабируемых JavaScript-приложений</a> // 2011.</li>
<li>Addy Osmani. <a href="http://addyosmani.github.io/backbone-fundamentals/">Developing Backbone.js Applications</a> // 2013.</li>
</ol>
<p>ДЗ:</p>
<ol>
<li>Реализовать проект на Backbone (определить models/collections и views).</li>
<li>Организовать подключение ресурсов через AMD.</li>
<li>Организовать сборку ресурсов для production и development окружения.</li>
</ol>
<h1 id="2-dom-ajax">2 DOM &amp; AJAX</h1>
<h2 id="2-1-dom-events">2.1 Работа с DOM, Events</h2>
<ul>
<li><a href="https://developer.mozilla.org/en/docs/DOM">DOM</a>.</li>
<li><a href="http://www.w3.org/TR/DOM-Level-2-Events/events.html">Events</a>.</li>
<li><a href="http://ru.wikipedia.org/wiki/Событийно-ориентированное_программирование">Событийно-ориентированное_программирование</a>.</li>
<li><a href="http://es5.github.io/#x4.3.8">Host Objects</a>.</li>
</ul>
<p>ДЗ:</p>
<ol>
<li>Реализация игровой механики (на протяжении последующих домашних заданий в этом модуле).</li>
</ol>
<h2 id="2-2-">2.2 Сетевое взаимодествие</h2>
<ul>
<li>HTTP.</li>
<li>AJAX.</li>
<li>CORS.</li>
<li>WebSockets.</li>
</ul>
<p>Литература:</p>
<ol>
<li>Tiffany Brown. <a href="http://dev.opera.com/articles/view/xhr2/">Introduction to XMLHttpRequest Level 2</a> // 2012.</li>
<li>Armin Ronacher. <a href="http://lucumr.pocoo.org/2012/9/24/websockets-101/">Websockets 101</a> // 2012.</li>
</ol>
<p>ДЗ:</p>
<ol>
<li>Наладить взаимодествие с сервером с помощью AJAX.</li>
</ol>
<h2 id="2-3-">2.3 Хранение данных на клиенте</h2>
<ul>
<li>Cookies.</li>
<li><a href="http://www.html5rocks.com/en/features/storage">Storage</a>.</li>
</ul>
<p>ДЗ:</p>
<ol>
<li>Организовать хранение пользовательских настроек на клиенте.</li>
<li>Сохранять результаты игры на клиенте, при остуствии связи с сервером.</li>
</ol>
<h1 id="3-">3 Отладка и мобильный веб</h1>
<h2 id="3-1-web-inspector-css">3.1 Web Inspector и препроцессоры CSS</h2>
<ul>
<li><a href="http://sass-lang.com">Sass</a>.</li>
<li><a href="https://developers.google.com/chrome-developer-tools/docs/css-preprocessors">Source Maps</a>.</li>
</ul>
<p>ДЗ:</p>
<ol>
<li>Перевести CSS на Sass.</li>
</ol>
<h2 id="3-2-">3.2 Производительность</h2>
<ul>
<li>HTTP Cache.</li>
<li>HTTP Waterfall.</li>
<li>Reflow/Repaint.</li>
<li>Web workers.</li>
<li><a href="http://www.html5rocks.com/en/tutorials/appcache/beginner/">App Cache</a>.</li>
<li>Prefetching.</li>
<li>CSS специфичность.</li>
</ul>
<p>ДЗ:</p>
<ol>
<li>Сделать прогресс-бар загрузки ресурсов.</li>
<li>Настроить HTTP заголовки, отвечающие за кеширование ресурсов.</li>
</ol>
<h2 id="3-3-">3.3 Возможности смартфонов</h2>
<ul>
<li>Акселерометр.</li>
<li>Гироскоп.</li>
<li>Тач-события.</li>
</ul>
<p>Литература:</p>
<ol>
<li>Chris Wilson, Paul Kinlan. <a href="http://www.html5rocks.com/en/mobile/touchandmouse/">Touch And Mouse. Together Again For The First Time</a> // 2013.</li>
</ol>
<p>ДЗ:</p>
<ol>
<li>Сделать джойстик для смартфонов и организовать взаимодействие на websockets между экранами приложения.</li>
</ol>
<h1 id="-">Полезные ссылки</h1>
<ol>
<li><a href="http://buildnewgames.com">Build New Games. Open Web techniques for cutting-edge game development</a>.</li>
</ol>

        </section>
    </body>
</html>
